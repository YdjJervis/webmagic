<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="us.codecraft.webmagic.samples.amazon.dao.BatchDao">

    <resultMap id="BatchResultMap" type="Batch">
        <result property="id" column="bo_id"/>
        <result property="number" column="bo_batch_num"/>
        <result property="customerCode" column="bec_code"/>
        <result property="type" column="bo_type"/>
        <result property="status" column="bo_status"/>
        <result property="times" column="bo_times"/>
        <result property="startTime" column="bo_start_time"/>
        <result property="finishTime" column="bo_finish_time"/>
        <result property="progress" column="bo_progress"/>
        <result property="extra" column="bo_extra"/>
    </resultMap>

    <insert id="add" parameterType="Batch">
        INSERT INTO batch_order
        (bo_batch_num,bec_code,bo_type,bo_status,bo_times,bo_start_time,bo_finish_time,bo_progress,bo_extra)
        VALUES
        (#{number},#{customerCode},#{type},#{status},#{times},#{startTime},#{finishTime},#{progress},#{extra})
    </insert>

    <select id="findByBatchNumber" resultMap="BatchResultMap">
        SELECT * FROM batch_order WHERE bo_batch_num = #{0};
    </select>

    <select id="findByStatus" resultMap="BatchResultMap">
        select * from batch_order
        WHERE
        bo_status = #{0};
    </select>

    <update id="update" parameterType="Batch">
        UPDATE batch_order SET
        bec_code = #{customerCode},bo_type = #{type},bo_status = #{status},bo_times = #{times},bo_start_time = #{startTime},
        bo_finish_time = #{finishTime},bo_progress = #{progress},bo_extra = #{extra}
        WHERE bo_batch_num = #{number}
    </update>

</mapper>